<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
        <title>Recommendation Chart</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <style>
            #container {
                height: 800px;
            }
        </style>
</head>
<body>
    <figure class="highcharts-figure">
        <div id="container" style="width: 100%; display: block;"></div>
    </figure>

    <script>
        // const dateString = '["2024-04-01","2024-03-01","2024-02-01","2024-01-01"]'
        // const strongBuyString = '[11,12,12,12]'
        // const buyString = '[20,20,19,22]'
        // const holdString = '[14,14,13,13]'
        // const sellString = '[2,2,2,1]'
        // const strongSellString = '[0,0,0,0]'

        function createTrendChart(dateString, strongBuyString, buyString, holdString, sellString, strongSellString) {
            const dateList = JSON.parse(dateString);
            const strongBuyList = JSON.parse(strongBuyString);
            const buyList = JSON.parse(buyString);
            const holdList = JSON.parse(holdString);
            const sellList = JSON.parse(sellString);
            const strongSellList = JSON.parse(strongSellString);

            Highcharts.chart('container', {
                chart: {
                    type: 'column',
                },
                title: {
                    text: 'Recommendation Trends',
                    style: {
                        fontSize: '40px',
                    }
                },
                xAxis: {
                    categories: dateList,
                    labels: {
                        style: {
                            fontSize: '25px'
                        }
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: '#Analysis'
                    },
                    stackLabels: {
                        enabled: false
                    },
                    labels: {
                        style: {
                            fontSize: '25px'
                        }
                    }
                },
                legend: {
                    align: 'center',
                    x: 0,
                    verticalAlign: 'bottom',
                    y: 0,
                    floating: false,
                    backgroundColor: 'white',
                    shadow: false,
                    itemStyle: {
                        fontSize: '30px'
                    }
                },
                tooltip: {
                    headerFormat: '<b>{point.x}</b><br/>',
                    pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}',
                    style: {
                        fontSize: '30px'
                    }
                },
                plotOptions: {
                    column: {
                        stacking: 'normal',
                        dataLabels: {
                            enabled: true,
                            style: {
                                fontSize: '30px'
                            }
                        }
                    }
                },
                series: [{
                    type: 'column',
                    name: 'Strong Buy',
                    data: strongBuyList,
                    color: '#12471a'
                }, {
                    type: 'column',
                    name: 'Buy',
                    data: buyList,
                    color: '#33b05f'
                }, {
                    type: 'column',
                    name: 'Hold',
                    data: holdList,
                    color: '#9c620b'
                }, {
                    type: 'column',
                    name: 'Sell',
                    data: sellList,
                    color: 'red'
                }, {
                    type: 'column',
                    name: 'Strong Sell',
                    data: strongSellList,
                    color: '#872239'
                }]
            })
        }
    </script>
    
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
</body>
</html>
